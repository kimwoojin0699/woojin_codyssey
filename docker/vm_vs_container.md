# 컨테이너 및 가상화 기술 문서

## 1. 가상머신(Virtual Machine)과 컨테이너(Container)의 차이점

| 항목 | 가상머신 (VM) | 컨테이너 |
|------|----------------|-----------|
| 아키텍처 | 하이퍼바이저 위에 전체 운영체제를 포함한 가상 환경 실행 | 호스트 OS의 커널을 공유하며 격리된 애플리케이션 환경 제공 |
| 부팅 속도 | 느림 (수 초~수 분) | 매우 빠름 (수 밀리초~수 초) |
| 자원 사용 | 운영체제 별로 자원 소비 | 호스트 OS 공유로 자원 소비 적음 |
| 이식성 | VM 이미지 이식성 높음 | 더 가볍고 이식성 뛰어남 |
| 격리성 | 높은 수준의 격리 | 격리는 되지만 커널 공유로 보안 이슈 가능 |
| 대표 도구 | VMware, VirtualBox, Hyper-V | Docker, containerd, Podman |

---

## 2. 컨테이너(Container)와 이미지(Image)의 차이점

| 항목 | 이미지 (Image) | 컨테이너 (Container) |
|------|-----------------|------------------------|
| 정의 | 실행 가능한 애플리케이션의 정적인 템플릿 | 이미지로부터 생성된 실행 중인 인스턴스 |
| 상태 | 불변(immutable) | 가변(mutable) |
| 실행 여부 | 실행되지 않음 | 실행 중인 상태 |
| 예시 | `nginx:latest` (이미지) | `nginx` 서버가 실행 중인 컨테이너 |

이미지는 컨테이너를 생성하기 위한 청사진이며, 컨테이너는 그 이미지의 실행 결과물입니다.

---

## 3. 컨테이너 런타임(Container Runtime) 정의

**컨테이너 런타임**은 컨테이너의 생명주기(생성, 실행, 정지, 삭제 등)를 관리하고, 운영체제 수준에서 격리된 환경에서 컨테이너를 실행하는 소프트웨어입니다.

- **기능**:
  - 이미지 풀링(Pulling)
  - 컨테이너 생성 및 실행
  - 네트워크, 스토리지 연결
  - 리소스 제한 및 보안 정책 적용

- **역할**:
  - `kubectl`, `docker`와 같은 상위 툴이 명령을 전달하면 실제 컨테이너 실행은 런타임이 담당

---

## 4. CNCF Landscape 기반: 컨테이너 런타임 종류 3가지

[CNCF Landscape](https://landscape.cncf.io/)에 따르면 대표적인 컨테이너 런타임은 다음과 같습니다:

1. **containerd**
   - CNCF 프로젝트
   - Docker에서 분리되어 독립적 런타임으로 발전
   - Kubernetes에서 널리 사용됨

2. **CRI-O**
   - Kubernetes의 CRI(Container Runtime Interface)를 따르는 경량 런타임
   - OpenShift 등에서 기본 런타임으로 사용

3. **gVisor**
   - Google에서 개발
   - 보안 중심의 사용자 공간 런타임으로, 커널 호출을 에뮬레이션하여 보안을 강화

---

## 5. 도커 이미지의 레이어(Docker Image Layer)

Docker 이미지 구조는 **레이어(layer)**라는 계층 구조로 구성되어 있습니다.

- **정의**: 이미지 레이어는 파일 시스템의 변경사항을 기록한 단위입니다.
- **특징**:
  - 각 명령(`FROM`, `RUN`, `COPY` 등)은 하나의 레이어를 생성
  - 레이어는 읽기 전용이며 캐시로 재사용 가능
  - 마지막 컨테이너 실행 시 생성되는 **Writable Layer**만 쓰기 가능

### 예시

```dockerfile
FROM ubuntu:20.04       # Base 이미지 레이어
RUN apt update          # 새로운 레이어 생성
RUN apt install -y nginx  # 또 다른 레이어
COPY ./html /var/www/html # 또 다른 레이어
